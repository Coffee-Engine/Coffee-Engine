window.sugarcube = {};
sugarcube.blockStyles = {};
sugarcube.extensions = {};
sugarcube.buttons = {};
sugarcube.contextMenuBlockCorrolations = {};
//Using a custom variable system to store more data.
//Blockly variables aren't inherently bad. Just limited.
sugarcube.variables = {
    storage: {},
    getAll: () => {
        return Object.values(sugarcube.variables.storage);
    },
    createVariable: (Name, Type, Color, public) => {
        sugarcube.variables.storage[Name] = {
            name: Name,
            type: Type,
            color: Color,
            public: public || false,
        };
    },
};

sugarcube.currentFilter = [];

//For custom blocks
sugarcube.customBlocks = {
    fieldTypes: [],
    storage: {},
    blockFromDefinition: (jsonDef) => {
        const swagStyledBuisness = {};

        let conjugatedName = `${jsonDef.returns}`;

        jsonDef.parameters.forEach((param) => {
            delete param.element;

            if (!swagStyledBuisness[param.name]) swagStyledBuisness[param.name] = 0;

            swagStyledBuisness[param.name] += 1;

            param.id = `_${param.type}_${param.name}_${swagStyledBuisness[param.name]}`;

            conjugatedName += param.id;
        });

        if (sugarcube.customBlocks.storage[conjugatedName]) {
            alert("This block exists");
            return;
        }

        sugarcube.customBlocks.storage[conjugatedName] = jsonDef;

        const myBlockDec = sugarcube.workspace.newBlock("myblocks_declaration");
        myBlockDec.initSvg();
        myBlockDec.render();
        myBlockDec.loadExtraState(jsonDef);
    },
    addCustomFieldToPrompt: (Name, Type, ImageURL, ExtraParameters) => {
        const newField = {
            Name: Name,
            Type: Type,
            Image: ImageURL,
            createFunction: ExtraParameters.createFunction,
            parseFunction: ExtraParameters.parseFunction,
            declaration: ExtraParameters.declaration,
        };

        sugarcube.customBlocks.fieldTypes.push(newField);
    },
};

sugarcube.comments = [];

sugarcube.toolbox = {
    kind: "categoryToolbox",
    contents: [
        {
            kind: "search",
            name: "Search",
            contents: [],
        },
    ],
};

sugarcube.menus = {};

sugarcube.constantOverrides = {};

sugarcube.blocklyTheme = {
    blockStyles: {},
    fontStyle: {
        family: "helvetica",
        weight: 500,
        size: 12,
    },
    componentStyles: {
        workspaceBackgroundColour: "#1e1e1e",

        toolboxBackgroundColour: "#333",
        toolboxForegroundColour: "#fff",

        flyoutBackgroundColour: "#252526",
        flyoutForegroundColour: "#ccc",
        flyoutOpacity: 0.5,

        scrollbarColour: "#797979",
        scrollbarOpacity: 0.4,

        insertionMarkerColour: "#fff",
        insertionMarkerOpacity: 0.3,

        cursorColour: "#d0d0d0",

        unseenBackground: "#1e1e1e",
    },
    startHats: true,
};

sugarcube.inject = (container) => {
    //Sugarcube only supports one workspace;
    if (sugarcube.workspace) sugarcube.workspace.dispose();

    sugarcube.filtered = JSON.parse(JSON.stringify(sugarcube.toolbox));
    sugarcube.workspace = Blockly.inject(container, {
        collapse: false,
        comments: true,
        toolbox: sugarcube.filtered,
        theme: sugarcube.blocklyTheme,
        renderer: "sugarcube", //"Thrasos",
        grid: {
            spacing: 40,
            length: 3,
            colour: "#484848",
            snap: false,
        },
        zoom: {
            controls: true,
            wheel: false,
            startScale: 0.8,
            maxScale: 3,
            minScale: 0.3,
            scaleSpeed: 1.2,
            pinch: true,
        },
        move: {
            scrollbars: {
                horizontal: true,
                vertical: true,
            },
            drag: true,
            wheel: true,
        },
        trashcan: false, // we don't want the recycling bin. Maybe it can be an option though?
        plugins: {
            toolbox: sugarcube.ContinuousToolbox,
            flyoutsVerticalToolbox: sugarcube.ContinuousFlyout,
            metricsManager: sugarcube.ContinuousMetrics,
        },
    });

    sugarcube.workspace.addChangeListener(Blockly.Events.disableOrphans);

    //Register existing buttons
    Object.keys(sugarcube.buttons).forEach((buttonID) => {
        sugarcube.workspace.registerButtonCallback(buttonID, sugarcube.buttons[buttonID]);
    });

    return sugarcube.workspace;
};

sugarcube.earthIcon = `data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxOTAuMjYyOTEiIGhlaWdodD0iMTkwLjI2MjkxIiB2aWV3Qm94PSIwLDAsMTkwLjI2MjkxLDE5MC4yNjI5MSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE0NC44Njg1NSwtODQuODY4NTQpIj48ZyBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPjxwYXRoIGQ9Ik0xNDYuODY4NTUsMTgwYzAsLTUxLjQzNTA5IDQxLjY5NjM3LC05My4xMzE0NSA5My4xMzE0NSwtOTMuMTMxNDVjNTEuNDM1MDksMCA5My4xMzE0Niw0MS42OTYzNyA5My4xMzE0Niw5My4xMzE0NmMwLDUxLjQzNTA5IC00MS42OTYzNyw5My4xMzE0NiAtOTMuMTMxNDYsOTMuMTMxNDZjLTUxLjQzNTA5LDAgLTkzLjEzMTQ1LC00MS42OTYzNyAtOTMuMTMxNDUsLTkzLjEzMTQ2eiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjQiLz48cGF0aCBkPSJNMjIwLjgwNDk3LDI2OS41NzAwN2MwLDAgLTQuNzE1NDksLTYuODkzMTkgLTEuNzE3NzUsLTExLjczNDE1YzIuMzkzMzQsLTMuODY0OTQgNi41MTUzNiwtNS45NTk0IDcuNDYzOSwtOS4xNzUzNGMxLjY0NzYsLTUuNTg2MDYgLTQuMjQ0MDcsLTUuMTU1ODggLTMuMDg0NzgsLTguMjcwMDdjMS45MzYzMiwtNS4yMDE0OCA1Ljg2OTc1LC02LjkzNTU0IDUuODY5NzUsLTYuOTM1NTRjMCwwIC0zMS4yOTAyNywtMTcuMTE3NzIgLTI5LjAzMzA0LC0xNy4xODA5MmMwLjY1NTUxLC0wLjAxODM2IC03LjA5NDM2LC0xMi44NDE0MSAtNy4wMzM4MywtMjMuMjA0NDRjMC4wMTc4NywtMy4wNTg2NCAzLjIxMjQ0LC0xLjkwOTg3IDUuMTQyNTEsLTQuMDk3YzEuODQ5NTYsLTIuMDk1OSAyLjM5ODUzLC03LjU1NzE2IDQuMTU0MDIsLTkuMTIxODdjMTUuMzUxNjYsLTEzLjY4MzIzIDEyLjQxMDIyLDEuMTA4NjUgMTYuMTA4MjQsLTMuMjIzMzFjMi4zODAxOCwtMi43ODgyMSA1LjAyMDA0LC01LjAxMzUyIDcuOTM4MTUsLTYuMzE5NTljMy41NjQzOSwtMS41OTUzMyAyNi41ODA3NywtMi4xMTE1NSAyOS4zNTgxOSw2LjAzNzhjMi43OTg4Miw4LjIxMjE0IDEuNDY4NTQsMTEuMTQ5NyAyLjQ5NDksMTIuMTk5N2M4Ljc4Njc0LDE0LjE4NjczIDcuMDAyNTYsMS4xODcyNCAxMi44MzE4OCwzLjUxMzhjMTEuNjk3NTIsNC4xMjg2OCAxNC41MzA1MSwyOS40ODI3MSAxOS4yNjI3OSwzOS43ODE2NGMyLjMzODE5LDUuMDg4NjUgOS44Njg5MSwtMC4zNzY0MSA5Ljg2ODkxLC0wLjM3NjQxbC00NS40OTkzNCw0MS41MTgxNGMwLDAgLTE3LjI4Njg3LDEuNTc5MDUgLTIzLjgzODE3LDAuOTI4NTdjLTYuODA0NTIsLTAuNjc1NjMgLTEwLjI4NjMzLC00LjM0MTAyIC0xMC4yODYzMywtNC4zNDEwMnoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIi8+PHBhdGggZD0iTTI1Mi4xMjA4LDE2MS41NTE5MWMwLDAgLTMuNzA1NDUsMi42MTY2NyAtMTAuMDQ3NjcsNi4zNzk2Yy0wLjkwNDQzLDAuNTM2NjIgLTUuNjc2MzIsMS4wMTk4MyAtOS45MDA0OSwtMi43MTQ5MWMtMC40OTA4NiwtMC40MzM5OCAtMi4wNTAyMywtMy41OTcwMSAwLjM5Mzk4LC01LjcwMDY3YzEuMTc0MDcsLTEuMDEwNDggMi44Njg5NywtNi40MjUzIDUuMjA1NjMsLTYuNDY1MTZjMS44Njk4NCwtMC4wMzE4OSAzLjc0NTk2LDIuMjE0NDQgNS4yMjY4NywzLjc1MzQ1YzEuMDk3MjEsMS4xNDAyNSAyLjA3MTk5LDEuNzAzMTkgMi4xNzE1MiwxLjY1MzY1YzMuNjczMDQsLTEuODI4NDMgMy43MzcwOSwtNy4yODMwMSAzLjczNzA5LC03LjI4MzAxYzAsMCAtMi40MDcsLTIuNTUwMTMgLTEuMzU0NTksLTMuMTA1NzZjMC40MTY3OCwtMC4yMjAwNCAxLjEwMzk5LDAuNTIyOTggMi4yOTYyNCwwLjc5MTQ0YzEuNDUwMDYsMC4zMjY1MSAzLjQ0NjM1LDAuMjE4ODQgNC4wNjQ3MywwLjIxODg0YzIuNjA5MTksMCA5LjE2MDUsLTguODcwMzUgMTMuNDk5NDksLTkuMDI5MTZjMS40MjIxMiwtMC4wNTIwNSAtMS4wNDgyMSwtNC4wODkyOSAxLjI2MzY4LC03LjAzNjUxYzAuOTgyMDMsLTEuMjUxODkgMy40NDkyNCwwLjQ1Mzk3IDUuMzM0MTYsLTAuNTAwNzFjMy4wNDY2LC0xLjU0MzA2IDUuODIyMzcsLTUuNTA0MDMgNy42OTY5MSwtNi4yNDUxNWM0LjA5NTMyLC0xLjYxOTEyIDkuMzE4NTMsNS42MzQ2NCA5LjMxODUzLDUuNjM0NjRjMCwwIDQuMTM4MTUsMS4wOTU2NCAxMS4yOTA5NSwtMC41MzkwOGMxLjkzNDE5LC0wLjQ0MjA1IDYuODAzNDIsLTQuNDg4ODMgNi44MDM0MiwtNC40ODg4M2MwLDAgLTIuMTgwMjMsLTguMjQ3NzIgLTAuNTY2NzIsLTguNDkzMTljMS4wMTYxOSwtMC4xNTQ2IDUuODc2NTEsNy40ODUxMiA2LjM4MTYyLDcuODM3NDNjMTAuOTc5MzEsNy42NTc5OSAxNi4zNDYwNywzMy45ODEzOSAxNS42NTk0MiwzNi40NDM3NWMtMC4yMzgzNywwLjg1NDggMi42MzQ4MiwyOS4yMjczMSAtMC42Mzk2Niw0My4zNjk0MmMtMC4yMjMxLDAuOTYzNTUgLTAuNDc0NzQsMS44NjEwNCAtMC43NTc4NCwyLjY3OTI2Yy0xLjEwOTM4LDMuMjA2MzEgLTMuMjkzMzEsNS42NDI3NyAtNC43MTQyNywzLjQ4MzA2Yy0wLjYwMzc3LC0wLjkxNzY2IC0wLjA5MDI4LC0yLjYyNjQzIC0wLjQ3ODY4LC00LjM0ODE5Yy0wLjQ4OTg4LC0yLjE3MTY1IC0xLjg0MTgxLC00LjMwNjcyIC0yLjI3ODY3LC00LjI2MTAzYy0wLjMwOTkzLDAuMDMyNDEgLTQuNzQ1NSwzLjAzOTEzIC02LjcwNTg0LDMuMjYxMmMtMy44NDc0NiwwLjQzNTg0IC02LjQ1MzgyLC0yLjExNDIyIC03LjcwMDU2LC00LjcyMjc5Yy0xLjU2OTM5LC0zLjI4MzY1IDAuMTg2ODQsLTkuMDczODMgLTAuMDAyNzcsLTEzLjUyMzRjLTAuMTYyNzIsLTMuODE4NTYgMi43OTc0MiwtNS4yNTg2OSAzLjQ1NjIzLC04Ljc4OTE3YzAuMjA5NjMsLTEuMTIzNCAtMS4yODk4OCwtMy40NDMwNyAtMS4xOTU3OCwtNC41ODc0OWMwLjI5MzQ1LC0zLjU2ODkzIDIuMzI0ODMsLTMuNzA1MjkgMi4yNjU4NSwtNS4zMjY3MWMtMC4wMzA1OSwtMC44NDEwMSAtMS43NTcyMSwtNC4xMzYzMSAtMi4xNzk0NCwtNC4xNjU1NmMtMi4xOTgzNywtMC4xNTIyOSAtNS40NTQ0Myw1LjE1MTMgLTYuMjQ3NTUsOS4zODYxOGMtMC4yNDQ0OSwxLjMwNTUgMS41MDIyNywxLjM0MDc5IDIuMzE0NDgsMi41MzE3YzEuMjQxODEsMS44MjA4MyAxLjcyNTIxLDQuNTI3ODEgMC43NDcxNCw0LjM3NjQ0Yy0yLjUwOTAxLC0wLjM4ODI4IC04LjU5NjQ1LC0zLjM5ODg3IC0xMC4wOTQwNiwtNy4wNzE2N2MtMC43ODI0LC0xLjkxODc4IC0wLjAzOTk0LC01Ljg2ODY3IC0xLjM0MTAzLC03LjMwNTU4Yy0wLjUwNDMyLC0wLjU1Njk2IC0xLjk1NzYyLC0xLjI4OTcxIC0yLjUyOTI4LC0yLjA1MDk1Yy0xLjQxNDksLTEuODg0MTIgLTEuOTAwNzMsLTMuOTQyNzkgLTEuOTAwNzMsLTMuOTQyNzljMCwwIC0zLjAwMTgyLC0xLjcxNjg2IC00LjIxNzgzLC0xLjc1NDU2Yy0xLjM3MDU2LC0wLjA0MjQ5IC0zLjU5NzQ4LDEuNTEyMjYgLTMuNTk3NDgsMS41MTIyNmMwLDAgMi4yMzM1NSw2LjQxMTMxIDEuMjA1ODQsMTAuNDY2MzdjLTAuMDE0MTgsMC4wNTU5MyAtMC4zMjc3NSwyLjUwODM1IC0wLjcxNTk2LDUuMzI5Yy0wLjA5MjQ2LDAuNjcxODEgLTAuMTQwNCwxLjU3MjMyIDEuNjcyNjksMS44ODY5MmMxLjU4NzYyLDAuMjc1NDggMy45NTI3MywtMS41Nzc4OSA1LjkwNjI4LC0xLjQ1MDIzYzIuMzk0NjEsMC4xNTY0OCA0LjI0MTA0LDIuMzA2NjYgNC4xNDMzNSwyLjkwNDE3Yy0wLjI0MjgsMS40ODUwNCAtMTMuMDI0ODYsNC45ODgzNSAtMTMuMTQyOCw1LjEwMDI2Yy0wLjg2MjMsMC44MTgyNyAtMC45NjU1NSwtMTAuODY1ODYgLTIuNDkzODEsLTkuNzQ1MzFjLTEuODkwNjksMS4zODYyOCAtMy44MjQyOSwyLjU5MjgxIC00LjY0NiwyLjYwMjQ2Yy0xLjAzMDI0LDAuMDEyMDkgLTAuNTg3MjMsNS40MjQ4OCAtMC45NjIxMyw0LjYwMzA0Yy0wLjg0MTM2LC0xLjg0NDM5IC0xLjU3MjksLTEwLjg0MjA1IC0yLjMxMTA5LC0xMC42OTc2NWMtMS45MDExLDAuMzcxODggLTUuMzAyNjQsLTEwLjAzMTQ3IC02LjMxNjQ0LC05LjAwMTljLTIuMTI5OTgsMi4xNjMxMyA2LjAwNzM4LDEwLjQzOTcgMy44NDkzMSwxMS44NzIzNWMtMS4xNjE0OSwwLjc3MTA2IC0xLjQ2MTg0LC0wLjU0NjE1IC0yLjUyNzU0LC0wLjExNzM5Yy0xLjQ3MTE4LDAuNTkxODkgLTAuOTQxNSwtMy4yMDYxOSAtMi4yMzIyNiwtMy4xMjc4M2MtMS41Njk2MiwwLjA5NTI5IC0yLjg3MjYsLTguODU1MzIgLTMuODg3ODIsLTguODUwN2MtMS43NTkyMywwLjAwODAxIC0zLjExOTgsMC45MDU0OCAtNC42NjA5NCwwLjUyMTU0Yy0xLjc0MDcxLC0wLjQzMzY2IC0zLjU1NzcxLC0yLjE1NTQxIC0zLjU1NzcxLC0yLjE1NTQxeiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiLz48cGF0aCBkPSJNMTg1LjQwNDQxLDEwNy40NDUxYy0wLjcwNzExLC0wLjcwNzEgMCwtMS40MTQyMSAwLC0xLjQxNDIxbDAuMTM0NiwwLjAxNDdjMC44MjYxOCwtMi40NzU2MSAxLjg4NzkyLC00LjI1NTc2IDQuMjA3MDUsLTUuNjI2MjhjMS4xMzI4LC0wLjY2OTQ0IDIuODMyNjQsLTAuNDIzOTcgMy44NTc2MSwtMS4yNTU3NmMyLjU5OTEsLTIuMTA5MjMgNS4yMDQ0MywtMy4yNDk2OCA4LjYxMzY0LC0zLjczNjcyYzIuODQ1MDgsLTEuMTY0MzYgNS4yNDE5OSwtMi43ODM0NyA4LjQ1MTgzLC0zLjAzOTk5YzIuNDg2NzgsLTAuMTk4NzMgNC43Njk5NCwxLjEyODI2IDcuMjI4OTgsMC43NjcwMWMzLjAyMDIsLTAuNDQzNyA1LjE4NTA4LC0xLjE1ODA2IDguMzEwNTUsMC4wNjk3MmMxLjIyMzY1LDAuNjEzMDIgMy43OTgsMS42NjAxIDMuNTg3OTksMy41MTA4NmMtMC4xNDIxNiwxLjI1MjggLTIuODI2NjQsMi4xNzM4OCAtMy44Mzc0NiwyLjMzODQxYy0wLjA1MDcyLDAuMDA4MjYgLTAuMTE1OTEsMC4wMDk4NiAtMC4xODkyNiwwLjAwNjQ3YzEuMjIyODgsMC45OTQyOSAwLjU3ODA4LDQuNjg1NzggLTAuNjUyMjYsNS4zNTU1NWMtMi41OTQwMiwxLjQxMjEzIC01LjYxMjg0LC0wLjYyODQ1IC02LjIzMjE1LDMuMjE5OTFjLTAuMTMwMTYsMC43NTkyOCAtMC4yNjQyMSwyLjM0ODk4IC0xLjA2MDI1LDIuNzc2MTFjLTEuMTI2NzMsMC42MDQ1NiAtNC4zOTUwNSwtMC44MTc5IC01LjI3NjgzLC0xLjYxNDljLTEuMDM2MDUsLTAuOTM2NDMgLTEuMjIyOTIsLTMuOTI3NjcgLTIuOTI1MzgsLTMuODk5MzZjLTEuNjc0NjksMC4wMjc4NCAtMC43ODM1MSwxLjk2MzAxIC0yLjE0MDYsMi44Nzk2OGMtMC4zNDI0NCwwLjIzMTMxIC0wLjg0NDQ4LC0wLjA3MDY5IC0xLjIzODU3LDAuMDUzNjhjLTAuNzA1MjQsMC4yMjI1NyAtMC40NDQ5NiwxLjQ2NTE3IC0wLjczMjI0LDEuNzcyMTVjLTEuNDY3NDksMS41NjgyMSAtMy4yMzQxMywwLjQ5MDg4IC00LjQ5NTU5LC0wLjQ4NDE5Yy0wLjMzNzQxLC0wLjYzNDE2IC0xLjAxODk5LC0xLjE4NDE5IC0xLjAxMjIyLC0xLjkwMjVjMC4wMDM3OCwtMC40MDA5OSAwLjgwMTE0LC0wLjI4NjU4IDEuMDM1OTMsLTAuNjExNjdjMC4zNjgyLC0wLjUwOTgzIC0wLjE2MjE4LC0xLjU5OTY3IC0wLjc3OTg0LC0xLjcxNzk2Yy0wLjYyMTI2LC0wLjExODk4IC0yLjA2ODA4LDIuNzU3NzUgLTIuNDQzNjUsMi45MjgxNmMtMS40MTQ3NywwLjY0MTk1IC00LjA2OTcsLTAuNDg2MzQgLTUuMzUxMywtMC44NzUwOGMtMS4xNzkzMSwtMC4zNTc3MSAtMy44MjM4NCwwLjQwMjkzIC01LjIyNDkzLDAuNDAyOTNjMCwwIC0wLjEzODY5LDAgLTAuMzEyNzcsLTAuMDUxNjVsLTAuMTA4NjgsMC4xMzQ5NGMwLDAgLTAuNzA3MSwwLjcwNzEgLTEuNDE0MjEsMHoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48cGF0aCBkPSJNMTU0LjY5MDU3LDE0NC40NTg0YzAuMzQ1NjQsLTAuODY0MTcgMC42NzUyMSwtMS43MzQzNiAwLjkyODkxLC0yLjYzMzc1YzAsMCAwLjI3NDcyLC0wLjk2MTUyIDEuMjM2MjQsLTAuNjg2OGMwLjk2MTUyLDAuMjc0NzIgMC42ODY4LDEuMjM2MjUgMC42ODY4LDEuMjM2MjVjLTAuNzMzNzcsMi41Mzk5NSAtMi4wNTExMSw0Ljg1NjE2IC0yLjYxNjgsNy40NTc1M2MtMC40NDUyMSwyLjA0NzMyIDAuMDE5NDEsNC4xMzAxMyAwLjAyMTk5LDYuMTg2NTljMC4wMDM0NiwyLjc1Mzg0IC0wLjI2ODM4LDUuNjYzMjYgMC4xODQ2OSw4LjM4MTY4YzAuMDEzNzksNC45MDM4NSAtMS4xMTU0NCwxMC44MzgyOCAwLjMzOTI1LDE1LjYwMTA3YzAuOTU0ODMsMy4xMjYyIDMuNDUzOCw1Ljc0ODggNC42NzExMyw4Ljc1MDE0YzAuODQ1ODMsMi4xNTE0IDIuODA4MTcsNC40NTE1NSAyLjExMzc5LDYuOTk2MjljLTAuNzU5ODcsMi43ODQ3NCAtMy40MzkyNyw0LjgxMDU1IC00LjM2MjEzLDcuNDU0NTRjLTAuNjA4OTYsMS43NDQ2NiAtMS4zMzg0MSwyLjkxMzE4IC0yLjA5ODYxLDQuNTg1MjZjLTAuNDcyNjMsMS4wMzk1NyAtMC4yMTY4OSwyLjMxMDM4IC0xLjgzNTE0LDIuNjI4ODZjLTIuMTgxMjMsMC40MjkyNyAtMi42NjM3OSwtMi4wNjE2MSAtMi44ODIxNCwtMy40NTk5NWMtMC4xMzY0OSwtMS4yNjMyNyAtMS4wMjEzOSwtMS40NDMwOSAtMS4zMTAzNiwtMi43ODUyYy0wLjUyNTcxLC0yLjQ0MTU5IC0xLjIwNTI2LC00LjgxOTM0IC0yLjAyNTQ3LC03LjE3OTJjLTEuMjk4MTksLTMuNzM1MDcgLTAuMjQ3MzgsLTkuMDY2OTcgLTAuODExNDQsLTEzLjA2NDkxYy0wLjAwMTM1LC0yLjkyMDQ1IDAuMzUyODUsLTUuODczMTQgMC41NjM2OSwtOC43ODUyOGMwLjIzMDA0LC0zLjE3NzIgLTAuNDE3ODQsLTYuNDA1OCAtMC4xODY2MiwtOS42MTMwNmMwLjE3MjE5LC0yLjM4ODM1IDEuMTIxMjYsLTQuNjc5MjUgMS41MTQ5NCwtNy4wNDEzNGMwLjc3MTQ5LC00LjYyODkgMy40MDcyMywtOC42MjUzIDQuMTM4MDQsLTEzLjE2NjQ3bDAuNDY3MzgsLTAuNzMwOGMwLDAgMC42MDkwMywtMC42MDkwNCAxLjI2MTg4LC0wLjEzMTQ0eiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAuNSIvPjxwYXRoIGQ9Ik0yNTUuNTYzMTQsMTAwLjA0MTVjLTAuNDIzMTYsLTAuNzc0MTMgMC4zNDAyNSwtMS4yODMwNyAwLjM0MDI1LC0xLjI4MzA3bDAuNzQ3NTksLTAuNDcyNjFjMS4xODcwNCwtMC40MzU1NSAzLjIwMDA0LC0wLjQzNjMzIDQuNzI4ODEsMC4xNDU4YzAuMTYyMDUsLTAuMjU5OTUgMC41NDE5MSwtMC40MDYxNiAwLjg5MDc1LC0wLjU3MDM5Yy0wLjgzOTc1LC0wLjQ3MTA5IC0xLjM3OTgxLC0xLjQyMjM1IC0yLjEwMTc0LC0xLjk5Njc3Yy0wLjAxMTYxLC0wLjAwOTI0IC0wLjYxNzIyLC0wLjM0MzQxIC0xLjEyMDksLTAuNzI3NTdjLTAuMjgwNiwwLjg0ODM2IC0wLjk0MzcyLDEuODk2NDkgLTEuNDQ4MjksMi4wNDc0OWMtMS4xMjYwMywwLjMzNyAtMy4xMDQ0LC0xLjMxMjU3IC0zLjg3NzQ3LC0xLjkyNzI4Yy0wLjgzMDEsLTAuODI3ODQgLTIuMzE5ODEsLTEuOTUyNTIgLTIuNTY1NDEsLTMuMTU3MjFjLTAuNTMyNjksLTIuNjEyODIgMS45NjE4MSwtNC4wNTgxNiA0LjEwMTkxLC00LjIyODE3YzMuMTMzMzUsLTAuMjQ4OTEgNS4zMzQzNSwxLjQ3MjM1IDguMTU5ODgsMS44OTY0NWMyLjg0NjYxLDAuNDI3MjYgNS41NTE3MiwwLjg0ODI5IDguMjcwMjYsMS45MzQ0YzcuMzcyNiwyLjk0OTA0IDE2LjY4ODg1LDUuMjczNDkgMjIuNDkwNDQsMTEuMDkyNzFjMi4xMzM3NSwxLjcwMjM0IDMuOTgzODYsMy42NDM1IDYuMDE4OTYsNS40NTQ2OGMwLjM5Nzk0LDAuMzU0MTUgMi4wMzQwOCwxLjUyODE1IDIuMTQ3OTYsMS44OTI0OWMwLjE5OTc3LDAuNjM5MTEgMC4wNjk3MSwxLjQwODkyIC0wLjI1OTU1LDEuOTkxOThjLTEuODQzNzcsMy4yNjQ5OCAtNi4wNjkzNCwtMC41Mzk0NSAtOC4zODYyLC0wLjYzNDYxYy0wLjQyNTI4LC0wLjAxNzQ3IC0wLjk4NTIxLDAuMjc5MjUgLTEuNTQyODksMC42NTQ2OWwwLjE4MDk4LDAuMTgwOThsLTAuOTQwNDYsMC45NDA0NmMtMC4xODA5NiwwLjE4MDk2IC0wLjQzMDk2LDAuMjkyODkgLTAuNzA3MTEsMC4yOTI4OWMtMC40ODIzNCwwIC0wLjg4NDkxLC0wLjM0MTQ5IC0wLjk3OTE1LC0wLjc5NTg4Yy0xLjA2MjM3LDAuNzA4NiAtMy44NDE3OCwwLjQ4NDgxIC00LjczNDUxLDAuNDE3MThjLTQuNTMzOTQsLTAuMzQzNDcgLTEyLjk3MjI4LC0wLjgyMTM5IC0xMi43MjI1NiwtNy4yNDk3MWMtMC41MTE1MywtMC41NjQxNiAtMS4xNzYxLC0xLjE2NzMgLTEuODA5NSwtMS42NDMzOWMtMC4wMjE3MywwLjUyNzAyIC0wLjIxNDE0LDEuMTM1MTMgLTAuMjY2ODksMS4zMDM5NGMtMC40NDUzNCwxLjQyNTMxIC0xLjk4NDQ5LDIuOTg3NDMgLTMuMDg0MzksMy45NTExNWMtMS45NDA2MSwxLjcwMDMyIC0zLjc1Mzg3LDAuODQzOCAtNS44NjU4NywxLjg0MzgyYy0xLjk5Njc2LDAuOTQ1NDUgLTMuNTgxNDksMS43Njg5NSAtNS44OTg1LDEuNzk2NzJjLTIuMjAzOTUsMCAtNC4zMjc4LDAuMDE0OTUgLTYuMzEyMDcsLTEuMDYzODZjLTEuMzgzMDcsLTAuNzUxOTQgLTIuNTY2MzEsLTMuMDExNDggLTQuMTE1NDksLTMuMDc3NThjLTIuNTI2MTUsLTAuMTA3OCAtNS4wMTQ0OSwxLjE3OTIyIC03LjU0NjgzLDEuMTI4NTVjLTAuOTQxNTgsLTAuMDE4ODQgLTIuMDk3NTcsMC4yMDA3NyAtMi43OTE0NywtMC40MzU5NmMtMC40NjQ4NSwtMC40MjY1NSAwLjEyOSwtMS4yNTg5IDAuMjc1NzgsLTEuODcyNDhjMC41MjIzMSwtMi4xODM0OCAyLjAxNDUzLC0zLjIwNyA0LjEyNjA1LC0zLjI2MTljNi41NjgzLDAgMTEuNzYyNTYsLTAuNjIyMyAxNi41OTc2NSwtNC41Njc5NHoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48cGF0aCBkPSJNMjkwLjc4MDMzLDE4Ni4wMzU3NGwwLjA1Mjc0LC0wLjA4NzE0YzAuOTc5MTcsLTUuNTc4NzYgMy45ODYxMSwtNy44MzE3MSA5LjY2NTU0LC03LjAxOTI3YzMuNjM5NzUsMS4xMDEgNy4xMDgxLDUuMjM3NjMgNS4yMjkxNiw5LjQzMjMzYy0wLjkyMzExLDIuMDYwODMgLTIuNTM3MTcsMS4xNTc1MSAtMi4wMjA5NCwzLjM3MzY1YzAuNTc4MDksMi40ODE2OCAyLjQ5NjA3LDQuMzMyMTQgMy4xNzY2NSw2LjY5MDFjMC4zNDc1MywxLjIwNDA3IC0wLjEzMjg4LDIuNzQ2OTQgLTAuMzM2NjgsMy45NDYwMmMwLDIuMjE1NzMgMC4xMjM2OSw0LjYzMTc3IDAuODgyODUsNi43MjEwN2MwLjE4NDQxLDAuNTA3NTMgMC4wMzc3NywxLjI1NDE4IDAuNDk0MTgsMS41NDI3N2MwLjUxOTEsMC4zMjgyNCAxLjY4NTAzLC0xLjAyNzA0IDEuODA5NjcsLTEuMTUzNTVjMC45MzQzMSwtMC45NDgyOSAxLjc3NTIyLC0yLjk0MTY1IDMuMzkzNzQsLTIuOTI0NzZjMC42Mzk5NSwwLjAwNjY4IDEuMDMzNDcsMC43NTk0MyAxLjU4NzMxLDEuMDgwMTFjMy44MzYzMywyLjIyMTMxIDEuNDE3ODMsNC40ODE1IC0wLjg5NTUyLDYuNzkyNDRjLTIuODExODIsMy41MjMzNiAtNS44MTcyOCw4LjQ0NDM0IC05LjM0NjI1LDExLjIxODc0Yy0yLjA4MjI2LDEuNjM3MDMgLTQuNjgzNzcsMC42NTcwOSAtNi44NjEwMSwxLjk0MzM3Yy0xLjI1NDAyLDAuNzQwODUgLTIuMTYzNTYsMi4xNjI0MiAtMy40ODQwOCwyLjk0NzAzYy0wLjU1NzY1LDAuMzA1NDkgLTEuMDg3NTMsMS4xNjQ2IC0xLjY3Mjk2LDAuOTE2NDZjLTAuNjcwMDcsLTAuMjg0MDIgLTAuNzAzNywtMS4yOTIxNCAtMC44Nzk1MSwtMS45OTgzN2MtMC40MzQxMSwtMS43NDM4MSAwLjg2ODQ3LC0zLjc2Nzk3IDAuNTczNzgsLTUuNzUzMTZjLTAuMzU1NTUsLTIuMzk1MjEgLTEuNzE1MzgsLTQuNTg3NjEgLTIuMjQ5NiwtNi45MTg1NGMtMC43NTIxLC0zLjI4MTU3IC0wLjc2NzQzLC03LjM3MzE4IC0wLjc3Mjc5LC0xMC43MzQyNGMwLjA4MzAzLC0yLjgzMjI5IC0yLjQyMzEsLTQuMjQwMjggLTMuMTIxNDUsLTYuNzY0ODNjLTAuMjA0MzUsLTAuNzM4NzUgLTAuODQ1MywtMS41Nzg1OCAtMC40NzUyNCwtMi4yNDk4MmMxLjAzNzgzLC0xLjg4MjQ5IDEuNzMwNjcsLTAuMDA1MDMgMi43MDkyNywtMC4zNzMzOWMyLjc5MTE2LC0xLjA1MDYyIDMuMjQ1MywtNy4xMDc1IDEuNjcwODMsLTguOTg0NmMwLDAgLTAuNjI0NywtMC43ODA4NyAwLjE1NjE3LC0xLjQwNTU2YzAuMjYxNCwtMC4yMDkxMiAwLjUwNTI5LC0wLjI2MDczIDAuNzE0MTEsLTAuMjM2ODV6IiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMC41Ii8+PC9nPjwvZz48L3N2Zz48IS0tcm90YXRpb25DZW50ZXI6OTUuMTMxNDU0OTk5OTk5OTk6OTUuMTMxNDU1LS0+`;

sugarcube.publicIcon = `data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI0MC45MzQ0IiBoZWlnaHQ9IjQwLjkzNDQiIHZpZXdCb3g9IjAsMCw0MC45MzQ0LDQwLjkzNDQiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMTkuNTMyOCwtMTU5LjUzMjgpIj48ZyBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPjxwYXRoIGQ9Ik0yNTguODg4NTQsMTgyLjYyMDhjMC4xMTE1MiwtMi4wNTAwMiAtNi4wODM5NCwtMTAuNTU3NTggLTE2LjE3MDk2LC0xMS43Mzc3OGMtMTMuNTkwODksLTEuNTkwMTYgLTE1Ljc4MTQyLDcuODI3MDQgLTIxLjYwNzYxLDEwLjk5MDY5YzAsMCAxNC4xMjA1LDYuOTM5MTggMjEuMTM5NjYsNy40MDM5NWM2LjQ4MjQ1LDAuNDI5MjUgMTYuNjM4OTEsLTYuNjU2ODcgMTYuNjM4OTEsLTYuNjU2ODd6IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTTIzNy41MDgwMywxODBjMCwtMi4zNjQ3MiAxLjkxNjk5LC00LjI4MTcyIDQuMjgxNzEsLTQuMjgxNzJjMi4zNjQ3MiwwIDQuMjgxNzIsMS45MTY5OSA0LjI4MTcyLDQuMjgxNzJjMCwyLjM2NDcyIC0xLjkxNjk5LDQuMjgxNzEgLTQuMjgxNzIsNC4yODE3MWMtMi4zNjQ3MiwwIC00LjI4MTcxLC0xLjkxNjk5IC00LjI4MTcxLC00LjI4MTcxeiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjAiIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIi8+PHBhdGggZD0iTTIzMi43MTAwOCwxODBjMCwtNS4wMTQ1NiA0LjA2NTEsLTkuMDc5NjcgOS4wNzk2NiwtOS4wNzk2N2M1LjAxNDU2LDAgOS4wNzk2Nyw0LjA2NTExIDkuMDc5NjcsOS4wNzk2N2MwLDUuMDE0NTYgLTQuMDY1MTEsOS4wNzk2NiAtOS4wNzk2Nyw5LjA3OTY2Yy01LjAxNDU2LDAgLTkuMDc5NjYsLTQuMDY1MSAtOS4wNzk2NiwtOS4wNzk2NnpNMjQxLjc4OTc0LDE4NS45ODIyNWMzLjMwMzksMCA1Ljk4MjI2LC0yLjY3ODM1IDUuOTgyMjYsLTUuOTgyMjVjMCwtMy4zMDM5IC0yLjY3ODM1LC01Ljk4MjI2IC01Ljk4MjI2LC01Ljk4MjI2Yy0zLjMwMzksMCAtNS45ODIyNSwyLjY3ODM1IC01Ljk4MjI1LDUuOTgyMjZjMCwzLjMwMzkgMi42NzgzNSw1Ljk4MjI1IDUuOTgyMjUsNS45ODIyNXoiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIwIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIvPjxwYXRoIGQ9Ik0yMTkuNTMyOCwyMDAuNDY3MnYtNDAuOTM0NGg0MC45MzQ0djQwLjkzNDR6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiLz48L2c+PC9nPjwvc3ZnPjwhLS1yb3RhdGlvbkNlbnRlcjoyMC40NjcxOTg3MzE5MjY5NDI6MjAuNDY3MTk4NzMxOTI2NjMtLT4=`;